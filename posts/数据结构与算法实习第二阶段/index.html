<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>æ•°æ®ç»“æ„ä¸ç®—æ³•å®ä¹ ç¬¬äºŒé˜¶æ®µ - ç™¾ä¹çš„ç¼–ç¨‹å­¦ä¹ </title><meta name="Description" content=""><meta property="og:title" content="æ•°æ®ç»“æ„ä¸ç®—æ³•å®ä¹ ç¬¬äºŒé˜¶æ®µ" />
<meta property="og:description" content="7-2 åˆ†è€Œæ²»ä¹‹ çŸ¥è¯†ç‚¹ï¼šå›¾è®º æ€è·¯ï¼š æ€è·¯ä¸€ï¼šè®°å½•é‚»æ¥çŸ©é˜µï¼Œè¾“å…¥æ—¶è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„åº¦æ•°ã€‚è¢«æ‘§æ¯çš„åŸå¸‚çš„åº¦ç½®ä¸º0ï¼Œå’Œå®ƒç›¸é‚»çš„ç‚¹åº¦ä¹Ÿ-1ã€‚æœ€åæ£€æŸ¥æ˜¯å¦æœ‰åº¦å¤§" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.leyoubaloy.xyz/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E5%AE%9E%E4%B9%A0%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-02T15:38:13+08:00" />
<meta property="article:modified_time" content="2022-07-02T15:38:13+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="æ•°æ®ç»“æ„ä¸ç®—æ³•å®ä¹ ç¬¬äºŒé˜¶æ®µ"/>
<meta name="twitter:description" content="7-2 åˆ†è€Œæ²»ä¹‹ çŸ¥è¯†ç‚¹ï¼šå›¾è®º æ€è·¯ï¼š æ€è·¯ä¸€ï¼šè®°å½•é‚»æ¥çŸ©é˜µï¼Œè¾“å…¥æ—¶è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„åº¦æ•°ã€‚è¢«æ‘§æ¯çš„åŸå¸‚çš„åº¦ç½®ä¸º0ï¼Œå’Œå®ƒç›¸é‚»çš„ç‚¹åº¦ä¹Ÿ-1ã€‚æœ€åæ£€æŸ¥æ˜¯å¦æœ‰åº¦å¤§"/>
<meta name="application-name" content="ç™¾ä¹çš„ç¼–ç¨‹å­¦ä¹ ">
<meta name="apple-mobile-web-app-title" content="ç™¾ä¹çš„ç¼–ç¨‹å­¦ä¹ "><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="https://myblog-1257298572.cos.ap-shanghai.myqcloud.com/qq%E5%A4%B4%E5%83%8F.jpg"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://www.leyoubaloy.xyz/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E5%AE%9E%E4%B9%A0%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/" /><link rel="prev" href="https://www.leyoubaloy.xyz/posts/%E4%B9%A1%E5%9C%9F%E4%B8%AD%E5%9B%BD%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "æ•°æ®ç»“æ„ä¸ç®—æ³•å®ä¹ ç¬¬äºŒé˜¶æ®µ",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/www.leyoubaloy.xyz\/posts\/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E5%AE%9E%E4%B9%A0%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5\/"
        },"genre": "posts","wordcount":  4696 ,
        "url": "https:\/\/www.leyoubaloy.xyz\/posts\/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E5%AE%9E%E4%B9%A0%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5\/","datePublished": "2022-07-02T15:38:13+08:00","dateModified": "2022-07-02T15:38:13+08:00","publisher": {
            "@type": "Organization",
            "name": "å­™ç™¾ä¹"},"author": {
                "@type": "Person",
                "name": "å­™ç™¾ä¹"
            },"description": ""
    }
    </script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="ç™¾ä¹çš„ç¼–ç¨‹å­¦ä¹ ">ç™¾ä¹çš„ç¼–ç¨‹å­¦ä¹ </a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/"> é¦–é¡µ </a><a class="menu-item" href="/categories/%E6%8A%80%E8%83%BD%E5%88%86%E4%BA%AB"><i class='fas fa-desktop'></i> æŠ€èƒ½åˆ†äº« </a><a class="menu-item" href="/bookshelf"><i class='fas fa-book'></i> ä¹¦å½±è®°å½• </a><a class="menu-item" href="/categories/%E9%9A%8F%E7%AC%94%E6%9D%82%E8%AE%B0"><i class='fas fa-pen-nib'></i> éšç¬”æ‚è®° </a><a class="menu-item" href="/categories/"><i class='fas fa-archive'></i> æ–‡ç« åˆ†ç±» </a><a class="menu-item" href="https://www.yuque.com/leyoubaloy/ev6tnq" rel="noopener noreffer" target="_blank"> Vis </a><a class="menu-item" href="/about/"> å…³äºæˆ‘ </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="ç™¾ä¹çš„ç¼–ç¨‹å­¦ä¹ ">ç™¾ä¹çš„ç¼–ç¨‹å­¦ä¹ </a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        å–æ¶ˆ
                    </a>
                </div><a class="menu-item" href="/" title="">é¦–é¡µ</a><a class="menu-item" href="/categories/%E6%8A%80%E8%83%BD%E5%88%86%E4%BA%AB" title=""><i class='fas fa-desktop'></i>æŠ€èƒ½åˆ†äº«</a><a class="menu-item" href="/bookshelf" title=""><i class='fas fa-book'></i>ä¹¦å½±è®°å½•</a><a class="menu-item" href="/categories/%E9%9A%8F%E7%AC%94%E6%9D%82%E8%AE%B0" title=""><i class='fas fa-pen-nib'></i>éšç¬”æ‚è®°</a><a class="menu-item" href="/categories/" title=""><i class='fas fa-archive'></i>æ–‡ç« åˆ†ç±»</a><a class="menu-item" href="https://www.yuque.com/leyoubaloy/ev6tnq" title="" rel="noopener noreffer" target="_blank">Vis</a><a class="menu-item" href="/about/" title="">å…³äºæˆ‘</a><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">æ•°æ®ç»“æ„ä¸ç®—æ³•å®ä¹ ç¬¬äºŒé˜¶æ®µ</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>å­™ç™¾ä¹</a></span>&nbsp;<span class="post-category">æ”¶å½•äº <a href="/categories/%E5%88%B7%E9%A2%98/"><i class="far fa-folder fa-fw"></i>åˆ·é¢˜</a>&nbsp;<a href="/categories/%E7%AC%94%E8%AE%B0/"><i class="far fa-folder fa-fw"></i>ç¬”è®°</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2022-07-02">2022-07-02</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 4696 å­—&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 10 åˆ†é’Ÿ&nbsp;<span id="/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E5%AE%9E%E4%B9%A0%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/" class="leancloud_visitors" data-flag-title="æ•°æ®ç»“æ„ä¸ç®—æ³•å®ä¹ ç¬¬äºŒé˜¶æ®µ">
                        <i class="far fa-eye fa-fw"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;æ¬¡é˜…è¯»
                    </span>&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#7-2-åˆ†è€Œæ²»ä¹‹">7-2 åˆ†è€Œæ²»ä¹‹</a></li>
    <li><a href="#7-3-é‚£å°±åˆ«æ‹…å¿ƒäº†">7-3 é‚£å°±åˆ«æ‹…å¿ƒäº†</a></li>
    <li><a href="#7-4-æ£®æ£®æ—…æ¸¸">7-4 æ£®æ£®æ—…æ¸¸</a></li>
    <li><a href="#7-5-hand-made-cream">7-5 Hand-made Cream</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="7-2-åˆ†è€Œæ²»ä¹‹">7-2 åˆ†è€Œæ²»ä¹‹</h2>
<p><strong>çŸ¥è¯†ç‚¹</strong>ï¼šå›¾è®º</p>
<p><strong>æ€è·¯</strong>ï¼š</p>
<ul>
<li>æ€è·¯ä¸€ï¼šè®°å½•é‚»æ¥çŸ©é˜µï¼Œè¾“å…¥æ—¶è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„åº¦æ•°ã€‚è¢«æ‘§æ¯çš„åŸå¸‚çš„åº¦ç½®ä¸º0ï¼Œå’Œå®ƒç›¸é‚»çš„ç‚¹åº¦ä¹Ÿ-1ã€‚æœ€åæ£€æŸ¥æ˜¯å¦æœ‰åº¦å¤§äº0çš„ç‚¹ï¼Œæœ‰å°±è¯´æ˜æœ‰åŸå¸‚ç›¸è¿é€šï¼Œè¾“å‡ºNOï¼Œå¦åˆ™è¾“å‡ºYESï¼›</li>
<li>æ€è·¯äºŒï¼šè®°å½•æ‰€æœ‰çš„è¾¹(u, v)ï¼Œå’Œè¢«æ”»é™·åŸæ± lost[i]ã€‚éå†è¾¹(u, v)ï¼Œå¦‚æœå­˜åœ¨uæˆ–væ²¡æœ‰è¢«æ”»é™·ï¼ˆå³ä¸åœ¨losté‡Œé¢ï¼‰ï¼Œè¯´æ˜æœ‰åŸå¸‚è¿é€šï¼Œè¾“å‡ºNOï¼Œå¦åˆ™YESï¼›</li>
</ul>
<p>å› ä¸ºè¿™é¢˜æœ€å¤šæœ‰10005ä¸ªç‚¹ï¼Œä½¿ç”¨é‚»æ¥çŸ©é˜µä¼šè¶…å†…å­˜ï¼Œæ‰€ä»¥é‡‡ç”¨ç¬¬äºŒç§æ€è·¯ï¼›</p>
<p><strong>ç»†èŠ‚</strong>ï¼š</p>
<ul>
<li>è®°å½•è¾¹å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªæ•°ç»„<code>u[10005]</code>å’Œ<code>v[10005]</code>ï¼Œç¬¬<code>i</code>æ¡è¾¹çš„ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯<code>u[i]</code>å’Œ<code>v[i]</code></li>
<li>åˆ¤æ–­è¾¹ä¸­æ˜¯å¦åŒ…å«æ²¡è¢«æ”»é™·çš„åŸæ± <code>if( !lost[u[i]] &amp;&amp; !lost[v[i]] )</code></li>
</ul>
<p><strong>ä»£ç </strong>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;;</span><span class="cp">
</span><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Citys</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="kt">int</span> <span class="n">N</span><span class="p">,</span> <span class="n">M</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">u</span><span class="p">[</span><span class="mi">10005</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
    <span class="kt">int</span> <span class="n">v</span><span class="p">[</span><span class="mi">10005</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span> <span class="c1">// ç¬¬ i æ¡è¾¹ä¸º (u[i], v[i])
</span><span class="c1"></span>    <span class="kt">void</span> <span class="nf">insertPath</span><span class="p">();</span> <span class="c1">// è¾“å…¥è·¯å¾„
</span><span class="c1"></span>    <span class="kt">bool</span> <span class="nf">isValid</span><span class="p">();</span> <span class="c1">// è¾“å…¥ä¸€ä¸ªæ–¹æ¡ˆï¼Œåˆ¤æ–­æ˜¯å¦æœ‰æ•ˆ
</span><span class="c1"></span>    <span class="n">Citys</span><span class="p">();</span>
<span class="p">};</span>

<span class="n">Citys</span><span class="o">::</span><span class="n">Citys</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">N</span> <span class="o">&gt;&gt;</span> <span class="n">M</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Citys</span><span class="o">::</span><span class="n">insertPath</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">M</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">u</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="n">Citys</span><span class="o">::</span><span class="n">isValid</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// è¾“å…¥æ”»ç ´çš„åŸæ± 
</span><span class="c1"></span>    <span class="kt">int</span> <span class="n">Np</span><span class="p">;</span> <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">Np</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">lost</span><span class="p">[</span><span class="mi">10005</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">Np</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">){</span>
        <span class="kt">int</span> <span class="n">city</span><span class="p">;</span> <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">city</span><span class="p">;</span>
        <span class="n">lost</span><span class="p">[</span><span class="n">city</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// åˆ¤æ–­
</span><span class="c1"></span>    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">M</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">){</span>
        <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="n">lost</span><span class="p">[</span><span class="n">u</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">lost</span><span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="p">){</span> <span class="c1">// å¦‚æœéƒ½ä¸æ˜¯è¢«æ”»é™·çš„åŸæ± 
</span><span class="c1"></span>            <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>

<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// è¾“å…¥æ•°æ®
</span><span class="c1"></span>    <span class="n">Citys</span> <span class="n">citys</span> <span class="o">=</span> <span class="n">Citys</span><span class="p">();</span>
    <span class="n">citys</span><span class="p">.</span><span class="n">insertPath</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">K</span><span class="p">;</span> <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">K</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">K</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">){</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">citys</span><span class="p">.</span><span class="n">isValid</span><span class="p">()</span> <span class="p">)</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;YES&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="k">else</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;NO&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div><h2 id="7-3-é‚£å°±åˆ«æ‹…å¿ƒäº†">7-3 é‚£å°±åˆ«æ‹…å¿ƒäº†</h2>
<p><strong>çŸ¥è¯†ç‚¹</strong>ï¼šdfsã€æ—¶é—´å¤æ‚åº¦</p>
<p><strong>æ€è·¯</strong>ï¼šæŠ½è±¡ä¸€ä¸‹ï¼šç»™å®šä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ï¼Œå¹¶ä¸”ç»™å‡ºèµ·ç‚¹Aå’Œç»ˆç‚¹Bï¼Œé—®ä»Aå‡ºå‘çš„æ‰€æœ‰è·¯å¾„æ˜¯å¦éƒ½èƒ½åˆ°è¾¾Bï¼Œå¹¶ä¸”æ±‚å‡ºä»Aå‡ºå‘åˆ°è¾¾Bçš„ä¸åŒè·¯å¾„æœ‰å¤šå°‘æ¡ã€‚ç¬¬ä¸€ä¸ªé—®é¢˜éå¸¸å¥½è§£ï¼Œåªè¦ä»Aå¼€å§‹DFSï¼Œå¦‚æœæœåˆ°æŸä¸ªå‡ºåº¦ä¸º0çš„ç‚¹ï¼Œå¹¶ä¸”è¿™ä¸ªç‚¹ä¸æ˜¯é¢˜é¢ç»™å‡ºçš„Bç‚¹ï¼Œå°±è¯´æ˜å¹¶ä¸æ˜¯æ‰€æœ‰ä»Aå‡ºå‘çš„è·¯å¾„éƒ½èƒ½åˆ°è¾¾Bã€‚å¯¹äºç¬¬äºŒä¸ªé—®é¢˜ï¼Œè™½ç„¶è¿™é“é¢˜æ•°æ®æ¯”è¾ƒå°ï¼Œæœ€å¤šåªæœ‰500ä¸ªç‚¹ï¼Œä½†æ˜¯è¿™é¢˜çš„æ—¶é—´é™åˆ¶æ˜¯400msï¼Œå¯¹äºæ±‚è§£ä¸åŒè·¯å¾„çš„é—®é¢˜ï¼Œå¦‚æœæš´åŠ›æœç´¢çš„è¯æ˜¯ä¸€å®šä¼šè¶…æ—¶çš„ã€‚</p>
<p>è€ƒå¯Ÿè¾“å…¥æ ·ä¾‹1:</p>
<pre tabindex="0"><code>7 8
7 6
8 5
6 5
5 2
5 3
2 1
3 1
7 1
</code></pre><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://myblog-1257298572.cos.ap-shanghai.myqcloud.com/img/7-3%20%E9%82%A3%E5%B0%B1%E5%88%AB%E6%8B%85%E5%BF%83%E4%BA%86%E9%A2%98%E8%A7%A3DAG.jpg"
        data-srcset="https://myblog-1257298572.cos.ap-shanghai.myqcloud.com/img/7-3%20%E9%82%A3%E5%B0%B1%E5%88%AB%E6%8B%85%E5%BF%83%E4%BA%86%E9%A2%98%E8%A7%A3DAG.jpg, https://myblog-1257298572.cos.ap-shanghai.myqcloud.com/img/7-3%20%E9%82%A3%E5%B0%B1%E5%88%AB%E6%8B%85%E5%BF%83%E4%BA%86%E9%A2%98%E8%A7%A3DAG.jpg 1.5x, https://myblog-1257298572.cos.ap-shanghai.myqcloud.com/img/7-3%20%E9%82%A3%E5%B0%B1%E5%88%AB%E6%8B%85%E5%BF%83%E4%BA%86%E9%A2%98%E8%A7%A3DAG.jpg 2x"
        data-sizes="auto"
        alt="https://myblog-1257298572.cos.ap-shanghai.myqcloud.com/img/7-3%20%E9%82%A3%E5%B0%B1%E5%88%AB%E6%8B%85%E5%BF%83%E4%BA%86%E9%A2%98%E8%A7%A3DAG.jpg"
        title="7-3 é‚£å°±åˆ«æ‹…å¿ƒäº†é¢˜è§£DAG" /></p>
<p>å¾ˆæ˜æ˜¾ï¼Œä»7åˆ°1æœ‰å¦‚ä¸‹è·¯å¾„ï¼š</p>
<pre tabindex="0"><code>7 -&gt; 6 -&gt; 5 â€”&gt; 2 -&gt; 1
7 -&gt; 6 -&gt; 5 -&gt; 3 -&gt; 1
7 -&gt; 8 -&gt; 5 -&gt; 2 -&gt; 1
7 -&gt; 8 -&gt; 5 -&gt; 3 -&gt; 1
</code></pre><p>å‘ç°ï¼Œä»5åˆ°1æœ‰ä¸¤æ¡è·¯å¾„ã€‚åœ¨æœç´¢æ—¶ï¼Œç»è¿‡7ï¼Œ6ï¼Œ5ï¼Œä¼šæŠŠè¿™ä¸¤æ¡è·¯å¾„éƒ½æœç´¢ä¸€éï¼›ç»è¿‡7ï¼Œ8ï¼Œ5ï¼Œåˆä¼šæŠŠè¿™ä¸¤æ¡è·¯å¾„æœç´¢ä¸€éã€‚è¿™æ ·å°±é€ æˆäº†æ—¶é—´çš„æµªè´¹ã€‚æˆ‘ä»¬è€ƒè™‘ï¼Œå¦‚æœåœ¨ç»è¿‡6å·èŠ‚ç‚¹åˆ°è¾¾5å·èŠ‚ç‚¹ï¼Œå†åˆ°è¾¾ç»ˆç‚¹1å·èŠ‚ç‚¹çš„æ‰€æœ‰è·¯å¾„å…¨éƒ¨æœç´¢å®Œæ—¶ï¼Œ5å·èŠ‚ç‚¹èƒ½å¤Ÿå‚¨å­˜ä¸‹â€œç»è¿‡è¯¥èŠ‚ç‚¹æœ‰2æ¡è·¯å¾„åˆ°è¾¾ç›®æ ‡èŠ‚ç‚¹â€è¿™ä¸ªä¿¡æ¯ï¼Œè¿™æ ·åœ¨ä»8å·èŠ‚ç‚¹æœç´¢åˆ°5å·æ—¶ï¼Œå°±ä¸éœ€è¦å†é‡å¤åœ°å°†æ¥ä¸‹æ¥çš„è·¯å¾„å…¨éƒ¨æœç´¢ä¸€éäº†ï¼Œç›´æ¥ä»5å·èŠ‚ç‚¹è¯»åˆ°â€œæ¥ä¸‹æ¥æœ‰2æ¡ä¸åŒçš„è·¯å¾„â€è¿™ä¸ªä¿¡æ¯ã€‚æ­£å¥½ï¼ŒDFSçš„â€œèµ°åˆ°åº•å†è¿”å›â€çš„æ€§è´¨å¯ä»¥åšåˆ°ä»å°¾åˆ°å¤´ï¼Œä¹Ÿå°±æ˜¯ä»ç»ˆç‚¹åˆ°èµ·ç‚¹è®°å½•ä¿¡æ¯ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨DFSçš„è¿‡ç¨‹ä¸­è¿›è¡Œè®°å¿†åŒ–æ“ä½œã€‚</p>
<p>æˆ‘ä»¬å®šä¹‰<code>step[i]</code>ä¸ºâ€œä»<code>i</code>å·èŠ‚ç‚¹åˆ°è¾¾ç›®æ ‡èŠ‚ç‚¹çš„è·¯å¾„æ¡æ•°â€œï¼Œæ±‚è§£çš„ç›®æ ‡æ˜¯<code>step[A]</code>ï¼Œå®šä¹‰<code>step[B] = 1</code>ï¼Œå¹¶ä¸”æ ‡è®°ğµBèŠ‚ç‚¹å·²ç»è¢«è®¿é—®è¿‡ã€‚åœ¨DFSçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå°†è¦æœç´¢çš„èŠ‚ç‚¹æ²¡æœ‰è¢«è®¿é—®è¿‡ï¼Œå°±æœç´¢ï¼Œå¹¶è®°å½•ä¸‹è·¯å¾„æ¡æ•°ï¼Œå½“å‰èŠ‚ç‚¹ç›´æ¥åŠ ä¸Šå¾…æœç´¢ï¼ˆå…¶å®è¿™æ—¶å€™å·²ç»æœç´¢å®Œäº†ï¼‰çš„èŠ‚ç‚¹çš„è·¯å¾„æ¡æ•°ã€‚ä»¥ä¸Šå›¾ä¸ºä¾‹ï¼ŒDFSçš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>åˆå§‹åŒ–<code>step[]</code>æ•°ç»„ä¸º0ï¼Œåˆå§‹åŒ–<code>vis[]</code>æ•°ç»„ä¸º<strong>false</strong>ï¼Œèµ‹å€¼<code>step[1]=1</code>, <code>vis[1]=true</code>;</li>
<li>ä»èµ·ç‚¹7å¼€å§‹DFSï¼Œèµ‹å€¼<code>vis[7]=true</code>ã€‚æ¥ä¸‹æ¥æƒ³æœç´¢6ï¼Œ<code>vis[6]==false</code>ï¼Œè¿›å…¥ï¼›</li>
<li>ä»6èŠ‚ç‚¹å¼€å§‹DFSï¼Œèµ‹å€¼<code>vis[6]=true</code>ã€‚æ¥ä¸‹æ¥æƒ³æœç´¢5ï¼Œ<code>vis[5]==false</code>ï¼Œè¿›å…¥ï¼›</li>
<li>ä»5èŠ‚ç‚¹å¼€å§‹DFSï¼Œèµ‹å€¼<code>vis[5]=true</code>ã€‚æ¥ä¸‹æ¥æƒ³æœç´¢2ï¼Œ<code>vis[2]==false</code>ï¼Œè¿›å…¥ï¼›</li>
<li>ä»2èŠ‚ç‚¹å¼€å§‹DFSï¼Œèµ‹å€¼<code>vis[2]=true</code>ã€‚æ¥ä¸‹æ¥æƒ³æœç´¢1ï¼Œ<code>vis[1]==true</code>ï¼Œä¸è¿›å…¥ï¼›ç´¯åŠ è·¯å¾„æ¡æ•°<code>step[2]=step[2]+step[1]</code>ï¼Œè¿™æ—¶<code>step[2]=1</code>ã€‚2èŠ‚ç‚¹æ²¡æœ‰å…¶ä»–çš„è·¯å¾„ï¼Œè¿”å›ï¼Œ<code>step[5]=step[5]+step[2]</code>,æ­¤æ—¶<code>step[5]=1</code></li>
<li>æ¥ä¸‹æ¥æƒ³æœç´¢3ï¼Œèµ‹å€¼<code>vis[1]==true</code>ï¼Œä¸è¿›å…¥ï¼›ç´¯åŠ è·¯å¾„æ¡æ•°<code>step[3]=step[3]+step[1]</code>ï¼Œè¿™æ—¶<code>step[3]=1</code>ã€‚3èŠ‚ç‚¹æ²¡æœ‰å…¶ä»–çš„è·¯å¾„ï¼Œè¿”å›,<code>step[5]=step[5]+step[3]</code>,æ­¤æ—¶<code>step[5]=2</code></li>
<li>5èŠ‚ç‚¹æ²¡æœ‰å…¶ä»–çš„è·¯å¾„ï¼Œè¿”å›ï¼Œ<code>step[6]=step[6]+step[5]</code>ï¼Œæ­¤æ—¶<code>step[6]=2</code>.</li>
<li>6æ²¡æœ‰å…¶å®ƒèŠ‚ç‚¹äº†ï¼Œè¿”å›7ï¼Œ<code>step[7]=step[7]+step[6]</code>ï¼Œæ­¤æ—¶<code>step[7]=2</code>ã€‚ç»§ç»­æœç´¢8ã€‚</li>
<li>ä»8å¼€å§‹DFSï¼Œèµ‹å€¼<code>vis[8]=true</code>ï¼Œæ¥ä¸‹æ¥åˆæƒ³æœç´¢5ï¼Œ<code>vis[5]=true</code>ï¼Œä¸è¿›å…¥ï¼Œ<code>step[8]=step[8]+step[5]</code>ï¼Œæ­¤æ—¶<code>step[8]=2</code>ï¼›</li>
<li>æ²¡æœ‰å…¶å®ƒè·¯å¾„äº†ï¼Œè¿”å›7ï¼Œ<code>step[7]=step[7]+step[8]</code>ï¼Œæ­¤æ—¶<code>step[7]=4</code>ã€‚æ²¡æœ‰å…¶å®ƒèŠ‚ç‚¹äº†ï¼Œé€’å½’ç»“æŸã€‚</li>
</ol>
<p><strong>ç»†èŠ‚</strong>ï¼š</p>
<ul>
<li>è·¯å¾„ä½¿ç”¨é‚»æ¥çŸ©é˜µå­˜å‚¨ï¼ˆé‚»æ¥è¡¨æ›´èŠ‚çœç©ºé—´ï¼Œä½†å› ä¸ºä¸èƒ½ä½¿ç”¨<code>vector</code>ï¼Œæ‰€ä»¥é‚»æ¥è¡¨å®ç°èµ·æ¥ä¼šéº»çƒ¦ä¸€ç‚¹ï¼‰</li>
<li>åˆ¤æ–­èƒ½å¦â€œé€»è¾‘è‡ªæ´½â€ï¼šå‡ºåº¦ä¸º0ä¸”è¯¥èŠ‚ç‚¹ä¸æ˜¯ç»ˆç‚¹ï¼Œä»¤å…¨å±€å˜é‡<code>isLogic</code></li>
</ul>
<p>dfsçš„è¿‡ç¨‹ç”¨ä»£ç å®ç°ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="kt">void</span> <span class="n">Propositions</span><span class="o">::</span><span class="n">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">vis</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="n">getOutdegree</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">node</span> <span class="o">!=</span> <span class="n">end</span> <span class="p">){</span>
        <span class="n">isLogic</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">N</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">){</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">path</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="p">){</span>
            <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="n">vis</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">)</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
            <span class="n">step</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="n">step</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">+</span> <span class="n">step</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>æ‰€æœ‰ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Propositions</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="kt">int</span> <span class="n">N</span><span class="p">,</span> <span class="n">M</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">;</span> <span class="c1">// èµ·ç‚¹å’Œç»ˆç‚¹
</span><span class="c1"></span>    <span class="kt">int</span> <span class="n">isLogic</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> <span class="c1">// æ˜¯å¦é€»è¾‘è‡ªæ´½
</span><span class="c1"></span>    <span class="kt">int</span> <span class="n">path</span><span class="p">[</span><span class="mi">505</span><span class="p">][</span><span class="mi">505</span><span class="p">];</span> <span class="c1">// é‚»æ¥çŸ©é˜µï¼Œåœ¨æ„å»ºå‡½æ•°ä¸­åˆå§‹åŒ–ä¸º0ï¼›
</span><span class="c1"></span>    <span class="kt">long</span> <span class="kt">long</span> <span class="n">step</span><span class="p">[</span><span class="mi">505</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span> <span class="c1">// step[i] : ç¬¬ i ä¸ªç‚¹åˆ°ç»ˆç‚¹çš„è·¯å¾„çš„ä¸ªæ•°
</span><span class="c1"></span>    <span class="kt">bool</span> <span class="n">vis</span><span class="p">[</span><span class="mi">505</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span> <span class="c1">// æ˜¯å¦è®¿é—®è¿‡
</span><span class="c1"></span>
    <span class="n">Propositions</span><span class="p">();</span>
    <span class="kt">void</span> <span class="nf">insertPath</span><span class="p">();</span> <span class="c1">// è¾“å…¥è·¯å¾„
</span><span class="c1"></span>    <span class="kt">int</span> <span class="nf">getOutdegree</span><span class="p">(</span><span class="kt">int</span> <span class="n">node</span><span class="p">);</span> <span class="c1">// è®¡ç®—ä¸€ä¸ªèŠ‚ç‚¹çš„å‡ºåº¦
</span><span class="c1"></span>    <span class="kt">void</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">node</span><span class="p">);</span> <span class="c1">// æ·±åº¦ä¼˜å…ˆæœç´¢
</span><span class="c1"></span>    <span class="kt">void</span> <span class="nf">detect</span><span class="p">();</span> <span class="c1">// æ¨ç†å…¥å£
</span><span class="c1"></span><span class="p">};</span>

<span class="n">Propositions</span><span class="o">::</span><span class="n">Propositions</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">N</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">){</span>
        <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">N</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span> <span class="p">){</span>
            <span class="n">path</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Propositions</span><span class="o">::</span><span class="n">insertPath</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">N</span> <span class="o">&gt;&gt;</span> <span class="n">M</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">M</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">){</span>
        <span class="kt">int</span> <span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">;</span> <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">from</span> <span class="o">&gt;&gt;</span> <span class="n">to</span><span class="p">;</span>
        <span class="n">path</span><span class="p">[</span><span class="n">from</span><span class="p">][</span><span class="n">to</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">Propositions</span><span class="o">::</span><span class="n">getOutdegree</span><span class="p">(</span><span class="kt">int</span> <span class="n">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">N</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">){</span>
        <span class="n">sum</span> <span class="o">+=</span> <span class="n">path</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">sum</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Propositions</span><span class="o">::</span><span class="n">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">vis</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="n">getOutdegree</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">node</span> <span class="o">!=</span> <span class="n">end</span> <span class="p">){</span>
        <span class="n">isLogic</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">N</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">){</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">path</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="p">){</span>
            <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="n">vis</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">)</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
            <span class="n">step</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="n">step</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">+</span> <span class="n">step</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Propositions</span><span class="o">::</span><span class="n">detect</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">start</span> <span class="o">&gt;&gt;</span> <span class="n">end</span><span class="p">;</span>
    <span class="n">step</span><span class="p">[</span><span class="n">end</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// é‡è¦åˆå§‹åŒ–
</span><span class="c1"></span>    <span class="n">vis</span><span class="p">[</span><span class="n">end</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> <span class="c1">// é‡è¦åˆå§‹åŒ–
</span><span class="c1"></span>    <span class="n">dfs</span><span class="p">(</span><span class="n">start</span><span class="p">);</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">step</span><span class="p">[</span><span class="n">start</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span> <span class="p">;</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">isLogic</span> <span class="p">)</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;Yes&#34;</span><span class="p">;</span>
    <span class="k">else</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;No&#34;</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Propositions</span> <span class="n">p</span><span class="p">;</span>
    <span class="n">p</span><span class="p">.</span><span class="n">insertPath</span><span class="p">();</span>
    <span class="n">p</span><span class="p">.</span><span class="n">detect</span><span class="p">();</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div><h2 id="7-4-æ£®æ£®æ—…æ¸¸">7-4 æ£®æ£®æ—…æ¸¸</h2>
<p><strong>çŸ¥è¯†ç‚¹</strong>ï¼šæœ€çŸ­è·¯å¾„ã€é‚»æ¥è¡¨</p>
<p><strong>æ€è·¯</strong>ï¼šç”¨Dijskraæœ€çŸ­è·¯ç®—æ³•åˆ†åˆ«æ±‚å‡º</p>
<p>1.ä½¿ç”¨ç°é‡‘ä»åŸå¸‚1å‡ºå‘ï¼Œåˆ°è¾¾æ‰€æœ‰åŸå¸‚çš„æœ€å°èŠ±è´¹ï¼ˆå‚¨å­˜åœ¨<code>oneToOthers</code>å†…ï¼‰
2.ä½¿ç”¨æ—…æ¸¸é‡‘ä»åŸå¸‚nå‡ºå‘ï¼Œåˆ°è¾¾æ‰€æœ‰åŸå¸‚çš„æœ€å°èŠ±è´¹ï¼ˆå‚¨å­˜åœ¨<code>othersToN</code>å†…ï¼‰</p>
<p>åœ¨ç¬¬iä¸ªåŸå¸‚å°†ç°é‡‘æ¢æˆæ—…æ¸¸é‡‘çš„æƒ…å†µä¸‹æ‰€éœ€è¦çš„ç°é‡‘æ€»é¢ä¸º</p>
<p><code>all_cash = oneToOthers[i] + othersToN[i]</code></p>
<p>ï¼ˆå³ä»åŸå¸‚1åˆ°è¾¾ç¬¬iä¸ªåŸå¸‚æ‰€éœ€è¦çš„æœ€å°ç°é‡‘æ•° + ä»ç¬¬iä¸ªåŸå¸‚åˆ°åŸå¸‚næ‰€éœ€è¦çš„æœ€å°æ—…æ¸¸é‡‘æ•°æ‰€è½¬æ¢æˆçš„ç°é‡‘æ•°é‡ï¼‰</p>
<p>ç„¶åå†é€šè¿‡æšä¸¾ä¸­è½¬ç‚¹<code>i</code>çš„æ–¹å¼ï¼Œå¾—åˆ°å…¨å±€æœ€ä¼˜è§£ã€‚ä¸ºäº†è®©Dijkstraç®—æ³•æ›´æœ‰æ•ˆç‡ï¼Œå¯ä»¥å­˜å‚¨åå‘è·¯å¾„ã€‚</p>
<p><strong>ç»†èŠ‚</strong>ï¼š</p>
<ul>
<li>è·¯å¾„çš„å­˜å‚¨ã€‚
<ul>
<li>ä½¿ç”¨é‚»æ¥è¡¨ï¼Œè€Œä¸æ˜¯é‚»æ¥çŸ©é˜µï¼Œå› ä¸º1w*1wçš„äºŒç»´æ•°ç»„ä¼šè¶…å†…å­˜ã€‚</li>
<li>å­˜å‚¨è·¯å¾„çš„æ•°æ®ç»“æ„ä¸ºï¼š<code>myvector&lt;Mypair&gt; path[100005], rpath[100005]</code>ï¼Œå…¶ä¸­<code>myvector</code>æ˜¯è‡ªå·±å®šä¹‰çš„ç±»ï¼Œå®ç°ç±»ä¼¼vectorçš„åŠŸèƒ½ï¼Œå…¶æœ€å¤§çš„ç‰¹ç‚¹æ˜¯é•¿åº¦å¯å˜ï¼›<code>Mypair</code>æ˜¯è‡ªå·±å®šä¹‰çš„ç»“æ„ä½“ï¼Œå®ç°ç±»ä¼¼pairçš„åŠŸèƒ½ã€‚</li>
<li><code>path</code>å­˜å‚¨çš„æ˜¯ä¸€ä¸ªåŸå¸‚åˆ°å¦ä¸€ä¸ªåŸå¸‚æ‰€éœ€è¦ç°é‡‘ã€‚<code>rpath</code>å­˜å‚¨çš„æ˜¯ç›¸åè·¯å¾„æ‰€éœ€è¦çš„æ—…æ¸¸é‡‘ã€‚</li>
<li>ä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºè¾“å…¥<code>u v c d</code>ï¼Œ<code>path[u].push_back(Mypair(v, c))</code>ï¼Œ<code>rpath[v].push_back(Mypair(u,d))</code></li>
</ul>
</li>
<li>Dijkstraæœ‰æšä¸¾å†™æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n*2)ï¼Œnæ˜¯èŠ‚ç‚¹ä¸ªæ•°ã€‚è¿˜æœ‰åŸºäºä¼˜å…ˆé˜Ÿåˆ—çš„å†™æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(ElogV)ã€‚è¿™é‡Œä½¿ç”¨åè€…ã€‚</li>
<li>æœ¬é¢˜çš„æœ€åä¸€æ­¥æ˜¯æ›´æ–°æ±‡ç‡ï¼Œä¹Ÿæœ‰ä¸¤ç§æ“ä½œï¼š
<ul>
<li>æ¯æ¬¡æ›´æ–°æ±‡ç‡åéƒ½æšä¸¾ä¸€æ¬¡ä¸­è½¬ç‚¹ï¼Œæ‰¾åˆ°æœ€å°‘èŠ±è´¹ï¼Œç„¶åè¾“å‡ºã€‚æ—¶é—´å¤æ‚åº¦é«˜ï¼Œ3ä¸ªç‚¹è¿‡ä¸å»ï¼Œåªèƒ½å¾—21åˆ†ã€‚</li>
<li>æšä¸¾ä¸­è½¬ç‚¹ï¼Œç”¨ä¸€ä¸ª<code>multiset</code>ï¼ˆå…¶ç‰¹ç‚¹æ˜¯æœ‰åºï¼Œèƒ½å¤Ÿå¿«é€Ÿæ’å…¥å’Œåˆ é™¤ï¼‰ç»´æŠ¤ã€‚æ¯æ¬¡æ›´æ–°æ±‡ç‡éƒ½åˆ é™¤æ—§çš„ï¼Œæ’å…¥æ–°çš„ã€‚æ—¶é—´å¤æ‚åº¦ä½ï¼Œä½†æ˜¯å¾ˆéš¾å®ç°ï¼ˆçº¢é»‘æ ‘ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p><strong>21åˆ†ä»£ç </strong>ï¼ˆä¸‰ä¸ªæµ‹è¯•ç‚¹è¶…æ—¶ï¼‰ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp">#define int long long 
</span><span class="cp"></span><span class="k">const</span> <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">100005</span><span class="p">;</span> <span class="c1">// æœ€å¤§èŠ‚ç‚¹æ•°
</span><span class="c1"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="c1">// å®ç°Mypair
</span><span class="c1"></span><span class="k">struct</span> <span class="nc">Mypair</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">first</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">second</span><span class="p">;</span>

    <span class="c1">// é»˜è®¤æ„é€ å‡½æ•°
</span><span class="c1"></span>    <span class="n">Mypair</span><span class="p">()</span>
            <span class="o">:</span><span class="n">first</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="n">second</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">{}</span>  <span class="c1">//ç”¨0,0åˆå§‹åŒ–
</span><span class="c1"></span>    <span class="c1">//æ„é€ å‡½æ•°
</span><span class="c1"></span>    <span class="n">Mypair</span><span class="p">(</span><span class="k">const</span> <span class="kt">int</span><span class="o">&amp;</span><span class="n">a</span><span class="p">,</span><span class="k">const</span> <span class="kt">int</span><span class="o">&amp;</span><span class="n">b</span><span class="p">)</span>
            <span class="o">:</span><span class="n">first</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="n">second</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">};</span>
<span class="c1">// ä¸ºäº†åŠ å…¥ä¼˜å…ˆé˜Ÿåˆ—ï¼Œå¯¹æ“ä½œç¬¦é‡è½½
</span><span class="c1"></span><span class="kt">bool</span> <span class="k">operator</span><span class="o">==</span><span class="p">(</span><span class="k">const</span> <span class="n">Mypair</span><span class="o">&amp;</span><span class="n">s1</span><span class="p">,</span><span class="k">const</span> <span class="n">Mypair</span><span class="o">&amp;</span><span class="n">s2</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">s1</span><span class="p">.</span><span class="n">first</span><span class="o">==</span><span class="n">s2</span><span class="p">.</span><span class="n">first</span><span class="o">&amp;&amp;</span><span class="n">s1</span><span class="p">.</span><span class="n">second</span><span class="o">==</span><span class="n">s2</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="k">operator</span><span class="o">&gt;</span><span class="p">(</span><span class="k">const</span> <span class="n">Mypair</span><span class="o">&amp;</span><span class="n">s1</span><span class="p">,</span><span class="k">const</span> <span class="n">Mypair</span><span class="o">&amp;</span><span class="n">s2</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">s1</span><span class="p">.</span><span class="n">first</span><span class="o">&gt;</span><span class="n">s2</span><span class="p">.</span><span class="n">first</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">s1</span><span class="p">.</span><span class="n">first</span><span class="o">&lt;</span><span class="n">s2</span><span class="p">.</span><span class="n">first</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="n">s1</span><span class="p">.</span><span class="n">second</span><span class="o">&gt;</span><span class="n">s2</span><span class="p">.</span><span class="n">second</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="k">operator</span><span class="o">&lt;</span><span class="p">(</span><span class="k">const</span> <span class="n">Mypair</span><span class="o">&amp;</span><span class="n">s1</span><span class="p">,</span> <span class="k">const</span> <span class="n">Mypair</span><span class="o">&amp;</span><span class="n">s2</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">s1</span><span class="p">.</span><span class="n">first</span><span class="o">&lt;</span><span class="n">s2</span><span class="p">.</span><span class="n">first</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">s1</span><span class="p">.</span><span class="n">first</span><span class="o">&gt;</span><span class="n">s2</span><span class="p">.</span><span class="n">first</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="n">s1</span><span class="p">.</span><span class="n">second</span><span class="o">&lt;</span><span class="n">s2</span><span class="p">.</span><span class="n">second</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// å®ç°ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆå¤§é¡¶å †ï¼‰
</span><span class="c1"></span><span class="k">class</span> <span class="nc">PriorityQueue</span>
<span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
    <span class="n">Mypair</span><span class="o">*</span> <span class="n">pArray</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">m_length</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">PriorityQueue</span><span class="p">(</span><span class="kt">int</span> <span class="n">N</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ä¸ºåç»­æ ¹èŠ‚ç‚¹ç›´æ¥ä»1å¼€å§‹ä½œå‡†å¤‡
</span><span class="c1"></span>        <span class="n">pArray</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Mypair</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
        <span class="n">m_length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
<span class="c1">// è¿”å›å †é¡¶
</span><span class="c1"></span>    <span class="n">Mypair</span> <span class="nf">Top</span><span class="p">(){</span>
        <span class="k">return</span> <span class="n">pArray</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="p">}</span>
<span class="c1">// åˆ é™¤å †é¡¶
</span><span class="c1"></span>    <span class="n">Mypair</span> <span class="nf">delMax</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// å¤§æ ¹å †ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºæœ€å¤§
</span><span class="c1"></span>        <span class="n">Mypair</span> <span class="n">max</span> <span class="o">=</span> <span class="n">pArray</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="c1">// å°†ç¬¬ä¸€ä¸ªå…ƒç´ å’Œæœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢,å¹¶ä½¿é•¿åº¦å‡ä¸€ï¼Œå³åˆ é™¤æœ€å¤§çš„å…ƒç´ 
</span><span class="c1"></span>        <span class="n">swap</span><span class="p">(</span><span class="n">pArray</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">pArray</span><span class="p">[</span><span class="n">m_length</span><span class="o">--</span><span class="p">]);</span>
        <span class="c1">// é˜²æ­¢å¯¹è±¡æ¸¸ç¦»
</span><span class="c1"></span>        <span class="n">pArray</span><span class="p">[</span><span class="n">m_length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">Mypair</span><span class="p">();</span>
        <span class="c1">// ä¸‹æ²‰æ¢å¤å †çš„æœ‰åºæ€§
</span><span class="c1"></span>        <span class="n">sink</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
        <span class="c1">// è¿”å›æœ€å¤§çš„èŠ‚ç‚¹å€¼
</span><span class="c1"></span>        <span class="k">return</span> <span class="n">max</span><span class="p">;</span>

    <span class="p">}</span>
<span class="c1">// æ’å…¥å…ƒç´ 
</span><span class="c1"></span>    <span class="kt">void</span> <span class="nf">insert</span><span class="p">(</span><span class="n">Mypair</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// å°†å€¼væ’å…¥åˆ°pArray[1]ä½ç½®å¤„ï¼Œæ‰€ä»¥è¿™é‡Œç”¨çš„å‰ç½®++
</span><span class="c1"></span>        <span class="n">pArray</span><span class="p">[</span><span class="o">++</span><span class="n">m_length</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">;</span>
        <span class="c1">// æ–°åŠ å…¥çš„å…ƒç´ ä¸Šæµ®
</span><span class="c1"></span>        <span class="n">swim</span><span class="p">(</span><span class="n">m_length</span><span class="p">);</span>
    <span class="p">}</span>

<span class="c1">// åˆ¤æ–­æ˜¯å¦ä¸ºç©º
</span><span class="c1"></span>    <span class="kt">bool</span> <span class="nf">isEmpty</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">m_length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
<span class="c1">// é˜Ÿåˆ—å…ƒç´ ä¸ªæ•°
</span><span class="c1"></span>    <span class="kt">int</span> <span class="nf">size</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">m_length</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// å‘ä¸Šæµ®
</span><span class="c1"></span>    <span class="kt">void</span> <span class="nf">swim</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// åˆ¤æ–­æœ€ä¸‹å±‚çš„å¶å­èŠ‚ç‚¹å€¼å¦‚æœå¤§äºå…¶çˆ¶èŠ‚ç‚¹åˆ™è¿›å…¥å¾ªç¯ä¸Šæµ®
</span><span class="c1"></span>        <span class="k">while</span> <span class="p">(</span><span class="n">k</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">pArray</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">pArray</span><span class="p">[</span><span class="n">k</span> <span class="o">/</span> <span class="mi">2</span><span class="p">])</span> <span class="p">{</span>
            <span class="c1">// äº¤æ¢çˆ¶èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹
</span><span class="c1"></span>            <span class="n">swap</span><span class="p">(</span><span class="n">pArray</span><span class="p">[</span><span class="n">k</span> <span class="o">/</span> <span class="mi">2</span><span class="p">],</span> <span class="n">pArray</span><span class="p">[</span><span class="n">k</span><span class="p">]);</span>
            <span class="c1">// kæ•°å€¼å‡å°ç»§ç»­å‘ä¸Šæµ®
</span><span class="c1"></span>            <span class="n">k</span> <span class="o">/=</span> <span class="mi">2</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">// å‘ä¸‹æ²‰
</span><span class="c1"></span>    <span class="kt">void</span> <span class="nf">sink</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">k</span> <span class="o">&lt;=</span> <span class="n">m_length</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// ç”±äºå †çš„æ€§è´¨çˆ¶èŠ‚ç‚¹ä¸ºkåˆ™å…¶å·¦å­æ ‘ä¸º2*kå³j
</span><span class="c1"></span>            <span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">k</span><span class="p">;</span>
            <span class="c1">// è¿™é‡Œå…ˆæ¯”è¾ƒå·¦å­æ ‘å’Œå³å­æ ‘çš„å¤§å°ï¼Œå°†æœ€å¤§çš„é‚£ä¸ªé”®è®°å½•ä¸‹æ¥å†å’Œçˆ¶èŠ‚ç‚¹æ¯”è¾ƒ
</span><span class="c1"></span>            <span class="k">if</span> <span class="p">(</span><span class="n">j</span> <span class="o">&lt;</span> <span class="n">m_length</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">pArray</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">pArray</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]))</span> <span class="n">j</span><span class="o">++</span><span class="p">;</span>
            <span class="c1">// å’Œçˆ¶èŠ‚ç‚¹æ¯”è¾ƒå¦‚æœçˆ¶èŠ‚ç‚¹æ¯”æœ€å¤§çš„å­èŠ‚ç‚¹è¿˜è¦å¤§ï¼Œåˆ™ç›´æ¥é€€å‡ºå¾ªç¯
</span><span class="c1"></span>            <span class="k">if</span> <span class="p">(</span><span class="n">pArray</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">pArray</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="k">break</span><span class="p">;</span>
            <span class="c1">// å¦‚æœçˆ¶èŠ‚ç‚¹æ¯”å­èŠ‚ç‚¹å°åˆ™äº¤æ¢
</span><span class="c1"></span>            <span class="n">swap</span><span class="p">(</span><span class="n">pArray</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">pArray</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
            <span class="c1">// kå€¼å˜å¤§ç»§ç»­ä¸‹æ²‰
</span><span class="c1"></span>            <span class="n">k</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>


<span class="c1">// å®ç°myvector
</span><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">myvector</span><span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="k">typedef</span> <span class="n">T</span> <span class="n">value_type</span><span class="p">;</span>
    <span class="k">typedef</span> <span class="n">T</span><span class="o">*</span> <span class="n">iterator</span><span class="p">;</span>
<span class="k">private</span><span class="o">:</span>
    <span class="n">value_type</span><span class="o">*</span> <span class="n">_data</span><span class="p">;</span>
    <span class="n">size_t</span> <span class="n">_size</span><span class="p">;</span>
    <span class="n">size_t</span> <span class="n">_capacity</span><span class="p">;</span>

<span class="k">public</span><span class="o">:</span>
    <span class="n">myvector</span><span class="p">()</span><span class="o">:</span><span class="n">_data</span><span class="p">(</span><span class="nb">NULL</span><span class="p">),</span><span class="n">_size</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="n">_capacity</span><span class="p">(</span><span class="mi">0</span><span class="p">){}</span>
    <span class="o">~</span><span class="n">myvector</span><span class="p">(){</span>
        <span class="k">delete</span> <span class="p">[]</span> <span class="n">_data</span><span class="p">;</span>
        <span class="n">_data</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
        <span class="n">_size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">_capacity</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">myvector</span><span class="p">(</span><span class="k">const</span> <span class="n">myvector</span><span class="o">&amp;</span> <span class="n">vec</span><span class="p">){</span>
        <span class="n">_size</span> <span class="o">=</span> <span class="n">vec</span><span class="p">.</span><span class="n">_size</span><span class="p">;</span>
        <span class="n">_capacity</span> <span class="o">=</span> <span class="n">vec</span><span class="p">.</span><span class="n">_capacity</span><span class="p">;</span>
        <span class="n">_data</span> <span class="o">=</span> <span class="k">new</span> <span class="n">value_type</span><span class="p">[</span><span class="n">_capacity</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">_size</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">){</span>
            <span class="n">_data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">vec</span><span class="p">.</span><span class="n">_data</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">myvector</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span> <span class="n">myvector</span><span class="o">&amp;</span> <span class="n">vec</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span> <span class="o">==</span> <span class="o">&amp;</span><span class="n">vec</span><span class="p">)</span> <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
        <span class="n">value_type</span><span class="o">*</span> <span class="n">temp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">value_type</span><span class="p">[</span><span class="n">vec</span><span class="p">.</span><span class="n">_capacity</span><span class="p">];</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">vec</span><span class="p">.</span><span class="n">_size</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">){</span>
            <span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">vec</span><span class="p">.</span><span class="n">_data</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">delete</span> <span class="p">[]</span> <span class="n">_data</span><span class="p">;</span>
        <span class="n">_data</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
        <span class="n">_size</span> <span class="o">=</span> <span class="n">vec</span><span class="p">.</span><span class="n">_size</span><span class="p">;</span>
        <span class="n">_capacity</span> <span class="o">=</span> <span class="n">vec</span><span class="p">.</span><span class="n">_capacity</span><span class="p">;</span>
        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="nf">push_back</span><span class="p">(</span><span class="n">value_type</span> <span class="n">val</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">_capacity</span><span class="p">){</span>
            <span class="n">_capacity</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="n">_data</span> <span class="o">=</span> <span class="k">new</span> <span class="n">value_type</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">_size</span><span class="o">+</span><span class="mi">1</span> <span class="o">&gt;</span> <span class="n">_capacity</span><span class="p">){</span>
            <span class="n">_capacity</span> <span class="o">*=</span> <span class="mi">2</span><span class="p">;</span>
            <span class="n">value_type</span><span class="o">*</span> <span class="n">temp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">value_type</span><span class="p">[</span><span class="n">_capacity</span><span class="p">];</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">_size</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">){</span>
                <span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">_data</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
            <span class="p">}</span>
            <span class="k">delete</span> <span class="p">[]</span> <span class="n">_data</span><span class="p">;</span>
            <span class="n">_data</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">_data</span><span class="p">[</span><span class="n">_size</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span><span class="p">;</span>
        <span class="o">++</span><span class="n">_size</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">size_t</span> <span class="nf">size</span><span class="p">()</span><span class="k">const</span><span class="p">{</span> <span class="k">return</span> <span class="n">_size</span><span class="p">;}</span>
<span class="o">==</span> <span class="mi">0</span><span class="p">;}</span>
    <span class="n">value_type</span><span class="o">&amp;</span> <span class="k">operator</span><span class="p">[](</span><span class="n">size_t</span> <span class="n">index</span><span class="p">){</span>
        <span class="k">return</span> <span class="n">_data</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">erase</span><span class="p">(</span><span class="n">iterator</span> <span class="n">it</span><span class="p">){</span>
        <span class="n">size_t</span> <span class="n">index</span> <span class="o">=</span> <span class="n">it</span> <span class="o">-</span> <span class="n">_data</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">index</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">_size</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">){</span>
            <span class="n">_data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">_data</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="o">--</span><span class="n">_size</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">iterator</span> <span class="nf">begin</span><span class="p">(){</span> <span class="k">return</span> <span class="n">_data</span><span class="p">;</span> <span class="p">}</span>
    <span class="n">iterator</span> <span class="nf">end</span><span class="p">(){</span> <span class="k">return</span> <span class="n">_data</span> <span class="o">+</span> <span class="n">_size</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>


<span class="c1">// æ‰¾åˆ°æœ€çŸ­è·¯
</span><span class="c1"></span><span class="kt">void</span> <span class="nf">dijkstra</span><span class="p">(</span> <span class="kt">int</span> <span class="n">from</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">vis</span><span class="p">[],</span> <span class="n">myvector</span><span class="o">&lt;</span><span class="n">Mypair</span><span class="o">&gt;</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">path</span><span class="p">)[</span><span class="n">N</span><span class="p">],</span> <span class="kt">int</span> <span class="n">dist</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span> <span class="p">){</span>
    <span class="n">PriorityQueue</span> <span class="n">que</span><span class="p">(</span><span class="mi">100005</span><span class="p">);</span> <span class="c1">// å¤§é¡¶å †
</span><span class="c1"></span>    <span class="n">Mypair</span> <span class="n">tmp</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">from</span><span class="p">);</span>
    <span class="n">que</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">tmp</span><span class="p">);</span>
    <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">que</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">()){</span>
        <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">w</span><span class="p">;</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">que</span><span class="p">.</span><span class="n">Top</span><span class="p">().</span><span class="n">first</span><span class="p">;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">que</span><span class="p">.</span><span class="n">Top</span><span class="p">().</span><span class="n">second</span><span class="p">;</span>
        <span class="n">que</span><span class="p">.</span><span class="n">delMax</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">vis</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
        <span class="n">vis</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
        <span class="n">dist</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">w</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">path</span><span class="p">[</span><span class="n">x</span><span class="p">].</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span> <span class="p">){</span>
            <span class="kt">int</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">;</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">i</span><span class="p">].</span><span class="n">first</span><span class="p">;</span>
            <span class="n">w</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">i</span><span class="p">].</span><span class="n">second</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">vis</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
            <span class="n">que</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="o">-</span><span class="n">dist</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">-</span><span class="n">w</span><span class="p">,</span> <span class="n">y</span><span class="p">});</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="c1">// ç¡®å®šä¸­è½¬ç‚¹iï¼Œæ±‚èŠ±è´¹ã€‚ä¸èƒ½æ•´é™¤çš„è¦+1
</span><span class="c1"></span><span class="kt">int</span> <span class="nf">TurnToCash</span><span class="p">(</span><span class="kt">int</span> <span class="n">othersToN</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">oneToOthers</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">a</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">i</span><span class="p">){</span>
    <span class="kt">int</span> <span class="n">dToC</span> <span class="o">=</span> <span class="n">othersToN</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">%</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">?</span> <span class="n">othersToN</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">othersToN</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">/</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="k">return</span> <span class="n">oneToOthers</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">dToC</span><span class="p">;</span>
<span class="p">}</span>


<span class="kt">signed</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// è¾“å…¥è·¯å¾„
</span><span class="c1"></span>    <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">q</span><span class="p">;</span> <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="n">m</span> <span class="o">&gt;&gt;</span> <span class="n">q</span><span class="p">;</span>
    <span class="n">myvector</span><span class="o">&lt;</span><span class="n">Mypair</span><span class="o">&gt;</span> <span class="n">path</span><span class="p">[</span><span class="n">N</span><span class="p">],</span> <span class="n">rpath</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
    <span class="k">while</span><span class="p">(</span> <span class="n">m</span><span class="o">--</span> <span class="p">){</span>
        <span class="kt">int</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">;</span> <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">u</span> <span class="o">&gt;&gt;</span> <span class="n">v</span> <span class="o">&gt;&gt;</span> <span class="n">c</span> <span class="o">&gt;&gt;</span> <span class="n">d</span><span class="p">;</span>
        <span class="n">Mypair</span> <span class="n">v_c</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
        <span class="n">Mypair</span> <span class="n">u_d</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">d</span><span class="p">);</span>
        <span class="n">path</span><span class="p">[</span><span class="n">u</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">v_c</span><span class="p">);</span>
        <span class="n">rpath</span><span class="p">[</span><span class="n">v</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">u_d</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="c1">// è¾“å…¥æ±‡ç‡
</span><span class="c1"></span>    <span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">)</span> <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="kt">int</span> <span class="n">oneToOthers</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
    <span class="kt">int</span> <span class="n">othersToN</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
    <span class="kt">bool</span> <span class="n">vis</span><span class="p">[</span><span class="n">N</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="nb">false</span><span class="p">};</span>
    <span class="kt">bool</span> <span class="n">rvis</span><span class="p">[</span><span class="n">N</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="nb">false</span><span class="p">};</span>
  <span class="c1">// æ±‚æœ€çŸ­è·¯ï¼Œå’Œåå‘æœ€çŸ­è·¯
</span><span class="c1"></span>    <span class="n">dijkstra</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">vis</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">oneToOthers</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
    <span class="n">dijkstra</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">rvis</span><span class="p">,</span> <span class="n">rpath</span><span class="p">,</span> <span class="n">othersToN</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>

<span class="c1">//    multiset&lt;int&gt; ms;
</span><span class="c1">// æšä¸¾ä¸­è½¬ç‚¹
</span><span class="c1"></span>    <span class="k">while</span><span class="p">(</span> <span class="n">q</span><span class="o">--</span> <span class="p">){</span>
        <span class="kt">int</span> <span class="n">node</span><span class="p">,</span> <span class="n">d</span><span class="p">;</span> <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">node</span> <span class="o">&gt;&gt;</span> <span class="n">d</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span> <span class="n">vis</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">rvis</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="p">)</span> <span class="n">a</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="p">;</span>
      <span class="c1">// ç”¨minå€¼ç»´æŠ¤æœ€å°çš„èŠ±è´¹
</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">min</span> <span class="o">=</span> <span class="mi">9223372036854775807</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">){</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">vis</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">rvis</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">){</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">min</span> <span class="o">&gt;</span> <span class="n">TurnToCash</span><span class="p">(</span><span class="n">othersToN</span><span class="p">,</span> <span class="n">oneToOthers</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
                    <span class="n">min</span> <span class="o">=</span> <span class="n">TurnToCash</span><span class="p">(</span><span class="n">othersToN</span><span class="p">,</span> <span class="n">oneToOthers</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
            <span class="p">}</span>

        <span class="p">}</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">min</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div><p><strong>æ»¡åˆ†ä½†æ˜¯ç”¨äº†multisetçš„ä»£ç </strong>ï¼š</p>
<p>æŠŠæšä¸¾ä¸­è½¬ç‚¹é‚£ä¸€éƒ¨åˆ†æ”¹æˆï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="cp">#include</span> <span class="cpf">&lt;set&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="n">multiset</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">ms</span><span class="p">;</span>
<span class="c1">// å…ˆæ’å…¥
</span><span class="c1"></span><span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">){</span>
  <span class="k">if</span><span class="p">(</span> <span class="n">vis</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">rvis</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">){</span>
    <span class="n">ms</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">TurnToCash</span><span class="p">(</span><span class="n">othersToN</span><span class="p">,</span> <span class="n">oneToOthers</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">while</span><span class="p">(</span> <span class="n">q</span><span class="o">--</span> <span class="p">){</span>
  <span class="kt">int</span> <span class="n">node</span><span class="p">,</span> <span class="n">d</span><span class="p">;</span> <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">node</span> <span class="o">&gt;&gt;</span> <span class="n">d</span><span class="p">;</span>
  <span class="k">if</span><span class="p">(</span> <span class="n">vis</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">rvis</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="p">){</span>
    <span class="c1">// æ¯æ¬¡æ›´æ–°æ±‡ç‡ï¼Œå…ˆåˆ é™¤æ—§æ±‡ç‡ï¼Œå†æ’å…¥æ–°çš„
</span><span class="c1"></span>    <span class="n">ms</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">ms</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">TurnToCash</span><span class="p">(</span><span class="n">othersToN</span><span class="p">,</span> <span class="n">oneToOthers</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">node</span><span class="p">))</span> <span class="p">);</span>
    <span class="n">a</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="p">;</span>
    <span class="n">ms</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span> <span class="n">TurnToCash</span><span class="p">(</span><span class="n">othersToN</span><span class="p">,</span> <span class="n">oneToOthers</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span> <span class="p">);</span>
  <span class="p">}</span>
  <span class="c1">// è¿”å›é¡¶éƒ¨å…ƒç´ å°±å¯ä»¥å•¦
</span><span class="c1"></span>  <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">ms</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><h2 id="7-5-hand-made-cream">7-5 Hand-made Cream</h2>
<p><strong>çŸ¥è¯†ç‚¹</strong>ï¼šåŠ¨æ€è§„åˆ’</p>
<p><strong>æ€è·¯</strong>ï¼šè€ƒå¯Ÿä»ç¬¬1ä¸ªé¢åŒ…<code>bread[1]</code>ï¼Œé€‰åˆ°ç¬¬iä¸ªé¢åŒ…<code>bread[i]</code>å’Œä»<code>cream[1]</code>åˆ°<code>cream[j]</code>ï¼Œä¹˜ç§¯æœ€å¤§çš„æ­é…<code>dp[i][j]</code>ï¼Œæœ‰å¦‚ä¸‹æƒ…å†µï¼š</p>
<ul>
<li>å¦‚æœå°†ç¬¬iä¸ªé¢åŒ…å’Œç¬¬jä¸ªé¢åŒ…æ­é…ï¼Œé‚£ä¹ˆ<code>dp[i][j] = dp[i-1][j-1] + bread[i]*cream[j]</code>ï¼›</li>
<li>å¦‚æœä¸æ­é…ï¼Œé‚£ä¹ˆç­‰äºå‰ä¸€ä¸ªé¢åŒ…ï¼Œæˆ–è€…å‰ä¸€ä¸ªå†°æ·‡æ·‹çš„ç»“è®ºï¼Œå³<code>dp[i][j] = dp[i-1][j]</code>æˆ–è€…<code>dp[i][j] = dp[i][j-1]</code></li>
</ul>
<p>å› ä¸ºè¦æ±‚æœ€å¤§çš„å€¼ï¼Œæ‰€ä»¥ç»¼åˆä¸€ä¸‹ï¼š<code>dp[i][j] = max(dp[i-1][j-1]+bread[i]*cream[j],dp[i-1][j],dp[i][j-1])</code></p>
<p>ç”¨ä¸¤ä¸ªå¾ªç¯ï¼ŒåŠ¨æ€æ›´æ–°ä¸€ä¸‹<code>dp</code>è¡¨å°±å¯ä»¥å•¦ï¼Œä¸‹é¢æ˜¯é¢˜ç›®æ ·ä¾‹æœ€ç»ˆå¾—åˆ°çš„dpè¡¨ï¼š</p>
<table>
<thead>
<tr>
<th>bread\cream</th>
<th>10</th>
<th>8</th>
<th>11</th>
<th>9</th>
</tr>
</thead>
<tbody>
<tr>
<td>-1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>10</td>
<td>100</td>
<td>100</td>
<td>110</td>
<td>110</td>
</tr>
<tr>
<td>8</td>
<td>100</td>
<td>164</td>
<td>188</td>
<td>188</td>
</tr>
</tbody>
</table>
<p><strong>ä»£ç </strong>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">max</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">,</span> <span class="kt">int</span> <span class="n">c</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">a</span> <span class="o">&gt;=</span> <span class="n">b</span> <span class="o">&amp;&amp;</span> <span class="n">a</span> <span class="o">&gt;=</span> <span class="n">c</span><span class="p">)</span> <span class="k">return</span> <span class="n">a</span><span class="p">;</span>
    <span class="k">else</span><span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">b</span> <span class="o">&gt;=</span> <span class="n">c</span><span class="p">)</span><span class="k">return</span> <span class="n">b</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">return</span> <span class="n">c</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">max</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">a</span> <span class="o">&gt;=</span> <span class="n">b</span><span class="p">)</span> <span class="k">return</span> <span class="n">a</span><span class="p">;</span>
    <span class="k">else</span> <span class="k">return</span> <span class="n">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">N</span><span class="p">,</span> <span class="n">M</span><span class="p">;</span> <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">N</span> <span class="o">&gt;&gt;</span> <span class="n">M</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">1005</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">1005</span><span class="p">];</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">N</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">)</span> <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">M</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">)</span> <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>

    <span class="kt">int</span> <span class="n">dp</span><span class="p">[</span><span class="mi">1005</span><span class="p">][</span><span class="mi">1005</span><span class="p">],</span> <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;=</span><span class="n">N</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">){</span>
        <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;=</span><span class="n">M</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span> <span class="p">){</span>
            <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">b</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]);</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span> <span class="p">;</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">dp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">res</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2022-07-02</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/%E4%B9%A1%E5%9C%9F%E4%B8%AD%E5%9B%BD%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" class="prev" rel="prev" title="ã€Šä¹¡åœŸä¸­å›½ã€‹è¯»ä¹¦ç¬”è®°"><i class="fas fa-angle-left fa-fw"></i>ã€Šä¹¡åœŸä¸­å›½ã€‹è¯»ä¹¦ç¬”è®°</a></div>
</div>
<div id="comments"><div id="valine" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://valine.js.org/">Valine</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line"><a href="https://travellings.link/" target="_blank" rel="noopener" title="å¼€å¾€-å‹é“¾æ¥åŠ›">
    <img src="https://travellings.link/assets/logo.gif" alt="å¼€å¾€-å‹é“¾æ¥åŠ›" width="120">
</a>  <a href="https://www.foreverblog.cn/go.html" target="_blank"> <img src="https://img.foreverblog.cn/wormhole_4_tp.gif" alt="" style="width:auto;height:32px;" title="ç©¿æ¢­è™«æ´-éšæœºè®¿é—®åå¹´ä¹‹çº¦å‹é“¾åšå®¢"></a></div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2022</span><span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br"/>
                    <span class="icp">é²ICPå¤‡2020039365å·-1</span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/valine/valine.min.css"><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><script type="text/javascript" src="/lib/valine/Valine.min.js"></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":50},"comment":{"valine":{"appId":"7d4uuBoHJjcoTArKAPbPhRVC-gzGzoHsz","appKey":"6KLJGiDyLqts0JE077ta5vKm","avatar":"mp","el":"#valine","emojiCDN":"https://cdn.jsdelivr.net/npm/emoji-datasource-google@5.0.1/img/google/64/","emojiMaps":{"100":"1f4af.png","alien":"1f47d.png","anger":"1f4a2.png","angry":"1f620.png","anguished":"1f627.png","astonished":"1f632.png","black_heart":"1f5a4.png","blue_heart":"1f499.png","blush":"1f60a.png","bomb":"1f4a3.png","boom":"1f4a5.png","broken_heart":"1f494.png","brown_heart":"1f90e.png","clown_face":"1f921.png","cold_face":"1f976.png","cold_sweat":"1f630.png","confounded":"1f616.png","confused":"1f615.png","cry":"1f622.png","crying_cat_face":"1f63f.png","cupid":"1f498.png","dash":"1f4a8.png","disappointed":"1f61e.png","disappointed_relieved":"1f625.png","dizzy":"1f4ab.png","dizzy_face":"1f635.png","drooling_face":"1f924.png","exploding_head":"1f92f.png","expressionless":"1f611.png","face_vomiting":"1f92e.png","face_with_cowboy_hat":"1f920.png","face_with_hand_over_mouth":"1f92d.png","face_with_head_bandage":"1f915.png","face_with_monocle":"1f9d0.png","face_with_raised_eyebrow":"1f928.png","face_with_rolling_eyes":"1f644.png","face_with_symbols_on_mouth":"1f92c.png","face_with_thermometer":"1f912.png","fearful":"1f628.png","flushed":"1f633.png","frowning":"1f626.png","ghost":"1f47b.png","gift_heart":"1f49d.png","green_heart":"1f49a.png","grimacing":"1f62c.png","grin":"1f601.png","grinning":"1f600.png","hankey":"1f4a9.png","hear_no_evil":"1f649.png","heart":"2764-fe0f.png","heart_decoration":"1f49f.png","heart_eyes":"1f60d.png","heart_eyes_cat":"1f63b.png","heartbeat":"1f493.png","heartpulse":"1f497.png","heavy_heart_exclamation_mark_ornament":"2763-fe0f.png","hole":"1f573-fe0f.png","hot_face":"1f975.png","hugging_face":"1f917.png","hushed":"1f62f.png","imp":"1f47f.png","innocent":"1f607.png","japanese_goblin":"1f47a.png","japanese_ogre":"1f479.png","joy":"1f602.png","joy_cat":"1f639.png","kiss":"1f48b.png","kissing":"1f617.png","kissing_cat":"1f63d.png","kissing_closed_eyes":"1f61a.png","kissing_heart":"1f618.png","kissing_smiling_eyes":"1f619.png","laughing":"1f606.png","left_speech_bubble":"1f5e8-fe0f.png","love_letter":"1f48c.png","lying_face":"1f925.png","mask":"1f637.png","money_mouth_face":"1f911.png","nauseated_face":"1f922.png","nerd_face":"1f913.png","neutral_face":"1f610.png","no_mouth":"1f636.png","open_mouth":"1f62e.png","orange_heart":"1f9e1.png","partying_face":"1f973.png","pensive":"1f614.png","persevere":"1f623.png","pleading_face":"1f97a.png","pouting_cat":"1f63e.png","purple_heart":"1f49c.png","rage":"1f621.png","relaxed":"263a-fe0f.png","relieved":"1f60c.png","revolving_hearts":"1f49e.png","right_anger_bubble":"1f5ef-fe0f.png","robot_face":"1f916.png","rolling_on_the_floor_laughing":"1f923.png","scream":"1f631.png","scream_cat":"1f640.png","see_no_evil":"1f648.png","shushing_face":"1f92b.png","skull":"1f480.png","skull_and_crossbones":"2620-fe0f.png","sleeping":"1f634.png","sleepy":"1f62a.png","slightly_frowning_face":"1f641.png","slightly_smiling_face":"1f642.png","smile":"1f604.png","smile_cat":"1f638.png","smiley":"1f603.png","smiley_cat":"1f63a.png","smiling_face_with_3_hearts":"1f970.png","smiling_imp":"1f608.png","smirk":"1f60f.png","smirk_cat":"1f63c.png","sneezing_face":"1f927.png","sob":"1f62d.png","space_invader":"1f47e.png","sparkling_heart":"1f496.png","speak_no_evil":"1f64a.png","speech_balloon":"1f4ac.png","star-struck":"1f929.png","stuck_out_tongue":"1f61b.png","stuck_out_tongue_closed_eyes":"1f61d.png","stuck_out_tongue_winking_eye":"1f61c.png","sunglasses":"1f60e.png","sweat":"1f613.png","sweat_drops":"1f4a6.png","sweat_smile":"1f605.png","thinking_face":"1f914.png","thought_balloon":"1f4ad.png","tired_face":"1f62b.png","triumph":"1f624.png","two_hearts":"1f495.png","unamused":"1f612.png","upside_down_face":"1f643.png","weary":"1f629.png","white_frowning_face":"2639-fe0f.png","white_heart":"1f90d.png","wink":"1f609.png","woozy_face":"1f974.png","worried":"1f61f.png","yawning_face":"1f971.png","yellow_heart":"1f49b.png","yum":"1f60b.png","zany_face":"1f92a.png","zipper_mouth_face":"1f910.png","zzz":"1f4a4.png"},"enableQQ":false,"highlight":true,"lang":"zh-cn","pageSize":10,"placeholder":"ä½ çš„è¯„è®º ...","recordIP":true,"visitor":true}},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"æ²¡æœ‰æ‰¾åˆ°ç»“æœ","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-FWJQFY04TK', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-FWJQFY04TK" async></script></body>
</html>
